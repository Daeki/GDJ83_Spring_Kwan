<?xml version="1.0" encoding="UTF-8"?>

<mapper namespace="com.kwan.app.trades.TradeDAO">

 	<update id="work" parameterType="AccountDTO">
 	
 		UPDATE BANK SET BALANCE=BALANCE+10000 WHERE BANK_ID=#{bank_id}
 	
 	</update>
 	
 	<select id="checkpw" parameterType="AccountDTO" resultType="AccountDTO">
 	
 		SELECT BANK_PW FROM BANK WHERE BANK_ID = #{bank_id}
 	
 	</select>
 	
 	
 	<!-- 내계좌 출금 -->
 	<insert id="transfer" parameterType="TradeDTO">
 	
 		INSERT INTO BANK_INFOS
		VALUES (#{bank_id}, CURRENT_DATE, #{difference}, #{account_u},
		(SELECT BALANCE
			FROM BANK
			WHERE BANK_ID=#{bank_id})+#{difference})
 	
 	</insert>
 	
 	<!-- 상대방 계좌에 입금 -->
 	<insert id="transfer2" parameterType="TradeDTO">
 	
 		INSERT INTO BANK_INFOS
		VALUES (#{account_u}, CURRENT_DATE, #{difference}*-1, #{bank_id}, 
		(SELECT BALANCE
			FROM BANK
			WHERE BANK_ID=#{bank_id})+#{difference}*-1)
 	
 	</insert>
 	
 	<update id="upbal" parameterType="TradeDTO">
 	
 		UPDATE BANK SET BALANCE = BALANCE + #{difference}
 		WHERE BANK_ID = #{bank_id}
 	
 	</update>
 	
 	 <update id="upbal2" parameterType="TradeDTO">
 	
 		UPDATE BANK SET BALANCE = BALANCE + #{difference}*-1
 		WHERE BANK_ID = #{account_u}
 	
 	</update>
 	
 </mapper>